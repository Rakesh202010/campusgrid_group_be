// Prisma schema for Group Backend
// This schema connects to ADMIN database for group metadata only
// All user data (GroupAdmin, School, SchoolAdmin, Student, Teacher, Class)
// is stored in their respective group databases (campusgrid_group_*)

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_ADMIN")
}

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-arm64-openssl-3.0.x", "darwin-arm64"]
}

// ========================================
// GROUP METADATA ONLY (in Admin DB)
// ========================================

model SchoolGroup {
  id                String   @id @default(uuid())
  groupName         String
  displayName       String
  subdomain         String   @unique
  dbName            String   @unique
  dbHost            String
  dbUser            String
  dbPassword        String
  status            String   @default("Active") // Active, Suspended, Inactive
  
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([subdomain])
  @@index([status])
  @@map("school_groups")
}

// Note: GroupAdmin, School, SchoolAdmin, Student, Teacher, Class models
// are now stored in their respective group databases (campusgrid_group_*),
// NOT in the admin database. Only metadata (SchoolGroup) is stored here.
